<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple WebSocket Test</title>
</head>
<body>
    <h1>ğŸ”Œ Simple WebSocket Test</h1>
    
    <button onclick="testWebSocketConnection()">Test WebSocket Connection</button>
    <button onclick="testWithRealUser()">Test With Real User</button>
    
    <div id="output"></div>
    
    <script src="trainingWebSocketClient.js"></script>
    
    <script>
        function log(message) {
            document.getElementById('output').innerHTML += '<br>' + message;
            console.log(message);
        }
        
        async function testWebSocketConnection() {
            log('Testing WebSocket connection with test user...');
            
            try {
                const wsClient = new TrainingWebSocketClient({
                    url: 'ws://localhost:8080'
                });
                
                // Set up event handlers
                wsClient.on('connected', () => {
                    log('âœ… WebSocket connected successfully!');
                });
                
                wsClient.on('error', (error) => {
                    log('âŒ WebSocket error: ' + error.message);
                    console.error('WebSocket error details:', error);
                });
                
                wsClient.on('welcome', (data) => {
                    log('ğŸ‰ Received welcome message: ' + JSON.stringify(data));
                });
                
                // Try to connect
                log('Attempting to connect...');
                wsClient.connect('TestRoom', 'TestUser', 'test-session-123');
                
            } catch (error) {
                log('âŒ Connection setup error: ' + error.message);
                console.error('Connection setup error:', error);
            }
        }
        
        async function testWithRealUser() {
            log('Testing with a real volunteer username...');
            
            const username = prompt('Enter a real volunteer username that exists in the database:');
            if (!username) {
                log('âŒ No username provided');
                return;
            }
            
            try {
                const wsClient = new TrainingWebSocketClient({
                    url: 'ws://localhost:8080'
                });
                
                wsClient.on('connected', () => {
                    log('âœ… WebSocket connected with real user!');
                });
                
                wsClient.on('error', (error) => {
                    log('âŒ WebSocket error: ' + error.message);
                });
                
                wsClient.on('welcome', (data) => {
                    log('ğŸ‰ Welcome: ' + JSON.stringify(data));
                });
                
                log('Connecting with username: ' + username);
                wsClient.connect('TestRoom', username, 'test-session-123');
                
            } catch (error) {
                log('âŒ Error: ' + error.message);
            }
        }
        
        log('Page loaded. Click a button to test WebSocket connection.');
    </script>
</body>
</html>